(this["webpackJsonpgallery-app"]=this["webpackJsonpgallery-app"]||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(4),o=n.n(l),i=(n(10),n(2)),r=n(1),s=function(e){var t=e.setQuery,n=e.showLikes,l=e.setShowLikes,o=Object(a.useState)(""),i=Object(r.a)(o,2),s=i[0],u=i[1];return c.a.createElement("header",{className:"container header"},c.a.createElement("div",{className:"logo",onClick:function(){l(!1)}},"Gallery ",c.a.createElement("span",null,"App")),c.a.createElement("div",{className:"search"},c.a.createElement("input",{className:"search-input",value:s,onChange:function(e){return u(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&t(s)},placeholder:"Search..."})),c.a.createElement("div",{className:n?"options show-likes":"options",onClick:function(){l((function(e){return!e}))}},"Favorites"))},u=function(e){var t=e.image,n=e.toggleLike,a=e.isLike,l=e.showModal;return c.a.createElement("div",{className:"gallery-block"},c.a.createElement("img",{src:t.urls.small,alt:t.alt_description,onClick:function(){l(t)}}),c.a.createElement("div",{className:a?"gallery-like like-yes":"gallery-like like-no",onClick:function(){n(t)}},"\u2665"))},m=function(e){var t=e.result,n=e.likes,a=e.toggleLike,l=e.showModal,o=e.isFetching;return c.a.createElement(c.a.Fragment,null,0===t.length?!o&&c.a.createElement("div",{className:"no-results"},"No results"):t.map((function(e){var t=n.findIndex((function(t){return t.id===e.id}))>=0;return c.a.createElement(u,{key:e.id,image:e,toggleLike:a,isLike:t,showModal:l})})))},d=function(e){var t=e.likes,n=e.toggleLike,a=e.showModal;return c.a.createElement(c.a.Fragment,null,0===t.length?c.a.createElement("div",{className:"no-results"},"No results"):t.map((function(e){return c.a.createElement(u,{key:e.id,image:e,toggleLike:n,isLike:!0,showModal:a})})))},f=function(){return c.a.createElement("div",{className:"spinner"},c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))},g=function(e){var t=e.image,n=e.closeModal,l=e.likes,o=e.toggleLike,i=Object(a.useState)(!1),s=Object(r.a)(i,2),u=s[0],m=s[1],d=Object(a.useState)(!0),g=Object(r.a)(d,2),E=g[0],h=g[1],k=Object(a.useRef)(null);return Object(a.useEffect)((function(){return document.body.style.paddingRight=window.innerWidth-document.body.clientWidth+"px",document.body.style.overflow="hidden",function(){document.body.style=""}}),[]),c.a.createElement("div",{className:"modal show",ref:k,onClick:function(e){e.target===k.current&&n(null)}},c.a.createElement("div",{className:"modal-box"},c.a.createElement("div",{className:"modal-top"},c.a.createElement("div",{className:l.findIndex((function(e){return e.id===t.id}))>=0?"gallery-like like-yes":"gallery-like like-no",onClick:function(){o(t)}},"\u2665"),c.a.createElement("button",{className:"btn-close",onClick:function(){n(null)}},"\xd7")),c.a.createElement("div",{className:u?"modal-img full":"modal-img"},c.a.createElement("img",{src:u?t.urls.full:t.urls.regular,alt:t.alt_description,onClick:function(){h(!0),m((function(e){return!e}))},onLoad:function(){h(!1)}}),E&&c.a.createElement(f,null)),c.a.createElement("div",{className:"modal-bottom"},c.a.createElement("div",null,t.description))))},E=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],l=function(){document.documentElement.clientHeight+window.pageYOffset>=document.documentElement.scrollHeight-100&&!n&&c(!0)};return Object(a.useEffect)((function(){return window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}}),[]),[n,c]},h=function(){var e=Object(a.useState)(localStorage.getItem("likes")?JSON.parse(localStorage.getItem("likes")):[]),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){localStorage.setItem("likes",JSON.stringify(n))}),[n]),[n,function(e){var t=n.findIndex((function(t){return t.id===e.id}));c(t>=0?function(e){return[].concat(Object(i.a)(e.slice(0,t)),Object(i.a)(e.slice(t+1)))}:function(t){return[].concat(Object(i.a)(t),[e])})}]};var k=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)("art"),u=Object(r.a)(o,2),k=u[0],v=u[1],b=Object(a.useState)(1),O=Object(r.a)(b,2),j=O[0],p=O[1],w=Object(a.useState)(!1),y=Object(r.a)(w,2),N=y[0],L=y[1],S=Object(a.useState)(null),M=Object(r.a)(S,2),C=M[0],I=M[1],x=Object(a.useState)(!1),F=Object(r.a)(x,2),J=F[0],W=F[1],_=E(),q=Object(r.a)(_,2),z=q[0],B=q[1],H=h(),K=Object(r.a)(H,2),Q=K[0],R=K[1];Object(a.useEffect)((function(){p(1),L(!1),A(k,1)}),[k]),Object(a.useEffect)((function(){z&&(N?B(!1):p((function(e){return e+1})))}),[z]),Object(a.useEffect)((function(){1!==j&&A(k,j)}),[j]),Object(a.useEffect)((function(){A(k,j)}),[]);var Y=function(e){I(e)},A=function(e,t){W(!0),fetch("https://api.unsplash.com/search/photos?page=".concat(t,"&query=").concat(e,"&per_page=24&client_id=").concat("0lUZxqIs4hMJktzh2zNFpu8YEx0-KhOIMgrvDkhvWmk")).then((function(e){return e.json()})).then((function(e){0===e.total?l([]):t<=e.total_pages&&l(1===t?Object(i.a)(e.results):function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.results))})})).catch((function(e){return console.log("Error fetch",e)})).finally((function(){W(!1),B(!1)}))};return c.a.createElement("div",null,c.a.createElement("div",{className:"head"},c.a.createElement(s,{setQuery:v,showLikes:N,setShowLikes:L})),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"gallery"},N?c.a.createElement(d,{likes:Q,toggleLike:R,showModal:Y}):c.a.createElement(m,{result:n,likes:Q,toggleLike:R,showModal:Y,isFetching:J})),J&&c.a.createElement(f,null)),C&&c.a.createElement(g,{image:C,closeModal:I,likes:Q,toggleLike:R}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,n){e.exports=n(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.2b2c0ba6.chunk.js.map