(this["webpackJsonpgame-app"]=this["webpackJsonpgame-app"]||[]).push([[0],{19:function(n,e,t){n.exports=t(30)},24:function(n,e,t){},30:function(n,e,t){"use strict";t.r(e);var o=t(0),i=t.n(o),r=t(9),a=t.n(r),c=(t(24),t(4)),s=t(3),l=t(10),u=t(11),d=t(15),f=t(12),p=t(16),h=t(1),g=t(2);function m(){var n=Object(h.a)([" \n    position: absolute;\n    top: 5px;\n    left: 10px;\n    color: #e8e8e8;\n"]);return m=function(){return n},n}function y(){var n=Object(h.a)(["\n    width: ","px;\n    height: ","px;\n    background: #999999;\n    position: relative;\n    overflow: hidden;\n    border-radius: 8px;\n"]);return y=function(){return n},n}function b(){var n=Object(h.a)(["\n    width: 100vw;\n    height: 100vh;\n    background: #0fc196;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n"]);return b=function(){return n},n}var x=g.a.div(b()),v=g.a.div(y(),(function(n){return n.size.width}),(function(n){return n.size.height})),w=g.a.div(m());function k(){var n=Object(h.a)(["\n    background: ",";\n    width: ","px;\n    height: ","px;\n    border-radius: 6px;\n    position: absolute;\n    box-shadow: 0px 4px 6px 0px rgba(0, 0, 0, .25);\n\n    .glass {\n        background: #444;\n        position: absolute;\n        width: 70%;\n        height: 20%;\n        left: 15%;\n    }\n\n    .glass-f {\n        top: 15%;\n        border-radius: 2px 2px 8px 8px;\n    }\n\n    .glass-b {\n        top: 65%;\n        border-radius: 8px 8px 2px 2px;\n    }\n\n    .wheel {\n        background: #444;\n        position: absolute;\n        width: 8%;\n        height: 20%;\n    }\n\n    .wheel-f-l {\n        top: 15%;\n        left: -8%;\n        border-radius: 3px 0 0 3px;\n    }\n\n    .wheel-f-r {\n        top: 15%;\n        left: 100%;\n        border-radius: 0 3px 3px 0;\n    }\n\n    .wheel-b-l {\n        top: 65%;\n        left: -8%;\n        border-radius: 3px 0 0 3px;\n    }\n\n    .wheel-b-r {\n        top: 65%;\n        left: 100%;\n        border-radius: 0 3px 3px 0;\n    }\n"]);return k=function(){return n},n}var E=g.a.div(k(),(function(n){return n.colorCar}),(function(n){return n.widthCar}),(function(n){return n.heightCar}));var j=function(n){var e=n.color,t=n.width,o=n.height,r=n.left,a=n.top;return i.a.createElement(E,Object.assign({colorCar:e,widthCar:t,heightCar:o},{style:{left:"".concat(r,"px"),top:"".concat(a,"px")}}),i.a.createElement("div",{className:"glass glass-f"}),i.a.createElement("div",{className:"glass glass-b"}),i.a.createElement("div",{className:"wheel wheel-f-l"}),i.a.createElement("div",{className:"wheel wheel-f-r"}),i.a.createElement("div",{className:"wheel wheel-b-l"}),i.a.createElement("div",{className:"wheel wheel-b-r"}))};var O=function(n){var e=n.cars;return i.a.createElement(i.a.Fragment,null,e.map((function(n){return i.a.createElement(j,Object.assign({key:n.id},n))})))};function S(){var n=Object(h.a)(["\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    width: 100%;\n"]);return S=function(){return n},n}var z=g.a.div(S());function A(){var n=Object(h.a)(["\n    background: #FBC5AA;\n    margin: 10px;\n    padding: 10px;\n    width: 200px;\n    max-width: 100%;\n    border-radius: 8px;\n    display: flex;\n    flex-direction: column;\n\n    .text-players {\n        text-align: center;\n        font-size: 1.4rem;\n\n        @media (max-height: 768px) {\n            font-size: 1.0rem;\n        }\n    }\n\n    .qt-players {\n        text-align: center;\n        font-size: 2rem;\n\n        @media (max-height: 768px) {\n            font-size: 1.2rem;\n        }\n    }\n\n    .control-info {\n        flex-grow: 1;\n        display: flex;\n        font-size: 1rem;\n\n        .control-list {\n            margin-left: 5px;\n\n            span {\n                background: #f5661f;\n                border-radius: 4px;\n                display: inline-block;\n                margin: 0px 2px 10px;\n                width: 20px;\n                height: 20px;\n                line-height: 19px;\n                font-size: 14px;\n                text-transform: uppercase;\n                text-align: center;\n                color: #fff;\n\n                @media (max-height: 768px) {\n                    margin: 0px 2px 2px;\n                    width: 16px;\n                    height: 16px;\n                    line-height: 15px;\n                    font-size: 11px;\n                }\n            }\n        }\n    }\n\n    .game-start {\n        background: #08AD85;\n        color: #fff;\n        width: 100%;\n        border: none;\n        border-radius: 6px;\n        padding: 3px 0 6px;\n        font-size: 1.2rem;\n        font-family: inherit;\n        line-height: 1.2;\n        transition: .2s;\n        cursor: pointer;\n        outline: none;\n\n        &:hover {\n            background: #039974;\n        }\n\n        @media (max-height: 768px) {\n            padding: 2px 0 4px;\n            font-size: .9rem;\n        }\n    }\n"]);return A=function(){return n},n}var B=g.a.div(A());var C=function(n){var e=n.controlButtons,t=n.gameStart,o=n.qtPlayers,r=e.map((function(n){return i.a.createElement("div",{key:n},Object(c.a)(n).map((function(n){return i.a.createElement("span",{key:n},n)})))}));return i.a.createElement(B,null,i.a.createElement("div",{className:"text-players"},"Players"),i.a.createElement("div",{className:"qt-players"},o),i.a.createElement("div",{className:"control-info"},i.a.createElement("div",null,"Control:"),i.a.createElement("div",{className:"control-list"},r)),i.a.createElement("button",{className:"game-start",onClick:function(){return t(o)}},"Start"))};var D=function(n){var e=n.controlButtons,t=n.gameStart;return i.a.createElement(z,null,e.map((function(n,o){return i.a.createElement(C,{key:n,controlButtons:e.slice(0,o+1),gameStart:t,qtPlayers:o+1})})))};function P(){var n=Object(h.a)(["\n    background: #f2f2f2;\n    width: 80px;\n    height: 35px;\n    margin: 0px 0;\n    border: none;\n    border-radius: 6px;\n    color: #000;\n    transition: .2s;\n    cursor: pointer;\n    outline: none;\n    user-select: none;\n\n    &:nth-child(2) {\n        margin-top: 10px;\n    }\n\n    &:hover {\n        background: #d8d8d8;\n    }\n\n    &:active {\n        background: #c4c4c4;\n    }\n"]);return P=function(){return n},n}function L(){var n=Object(h.a)(["\n    padding: 0 5px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]);return L=function(){return n},n}function M(){var n=Object(h.a)(["\n    display: flex;\n    padding-top: 10px;\n"]);return M=function(){return n},n}var T=g.a.div(M()),K=g.a.div(L()),U=g.a.button(P());var q=function(n){var e=n.keyDown,t=n.keyUp,o=n.keys;return i.a.createElement(T,null,i.a.createElement(K,null,i.a.createElement(U,{onMouseDown:function(){return e({code:o.left})},onMouseUp:function(){return t({code:o.left})},onTouchStart:function(){return e({code:o.left})},onTouchEnd:function(){return t({code:o.left})}},"\u2190")),i.a.createElement(K,null,i.a.createElement(U,{onMouseDown:function(){return e({code:o.top})},onMouseUp:function(){return t({code:o.top})},onTouchStart:function(){return e({code:o.top})},onTouchEnd:function(){return t({code:o.top})}},"\u2191"),i.a.createElement(U,{onMouseDown:function(){return e({code:o.bottom})},onMouseUp:function(){return t({code:o.bottom})},onTouchStart:function(){return e({code:o.bottom})},onTouchEnd:function(){return t({code:o.bottom})}},"\u2193")),i.a.createElement(K,null,i.a.createElement(U,{onMouseDown:function(){return e({code:o.right})},onMouseUp:function(){return t({code:o.right})},onTouchStart:function(){return e({code:o.right})},onTouchEnd:function(){return t({code:o.right})}},"\u2192")))},N=function(n){function e(n){var t;return Object(l.a)(this,e),(t=Object(d.a)(this,Object(f.a)(e).call(this,n))).initDirection=function(){return[{isLeft:!1,isRight:!1,isTop:!1,isBottom:!1,id:"player1"},{isLeft:!1,isRight:!1,isTop:!1,isBottom:!1,id:"player2"},{isLeft:!1,isRight:!1,isTop:!1,isBottom:!1,id:"player3"}]},t.initConfig=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return{quantityBots:3,quantityPlayers:n,sizeArena:t.getSizeArena(),gameOver:!1,gameStart:!1,distance:0,speedBots:3,speedPlayers:4}},t.initState=function(){return{bots:t.initBots(t.config.quantityBots),players:t.initPlayers(t.config.quantityPlayers)}},t.initBots=function(n){return t.botsCarsList.slice(0,n).map((function(n,e){return t.randomPosition(n,e+1)}))},t.initPlayers=function(n){return t.playersCarsList.slice(0,n).map((function(e,o){var i=Math.round(t.config.sizeArena.width/(n+1)*(o+1)-e.width/2),r=Math.round(t.config.sizeArena.height-e.height-20);return Object(s.a)({},e,{left:i,top:r})}))},t.getSizeArena=function(){var n=document.documentElement,e=n.clientWidth,t=n.clientHeight;return{width:e>1e3?900:Math.round(e/100*90),height:Math.round(t/100*96-90)}},t.keyDown=function(n){for(var e=0;e<t.config.quantityPlayers;e++)n.code!==t.keys[e].left||t.direction[e].isLeft?n.code!==t.keys[e].right||t.direction[e].isRight?n.code!==t.keys[e].top||t.direction[e].isTop?n.code!==t.keys[e].bottom||t.direction[e].isBottom||(t.direction[e].isBottom=!0):t.direction[e].isTop=!0:t.direction[e].isRight=!0:t.direction[e].isLeft=!0},t.keyUp=function(n){for(var e=0;e<t.config.quantityPlayers;e++)n.code===t.keys[e].left?t.direction[e].isLeft=!1:n.code===t.keys[e].right?t.direction[e].isRight=!1:n.code===t.keys[e].top?t.direction[e].isTop=!1:n.code===t.keys[e].bottom&&(t.direction[e].isBottom=!1)},t.randomPosition=function(n,e){var o=Math.round((t.config.sizeArena.width-n.width)*Math.random()),i=-180*e;return Object(s.a)({},n,{left:o,top:i})},t.collisionCheck=function(n,e){return n.top-(e.top+e.height)<0&&n.top+n.height-e.top>0&&n.left-(e.left+e.width)<0&&n.left+n.width-e.left>0},t.collision=function(n){var e=n.bots,o=n.players,i=new Set;return o.forEach((function(n,r){o.forEach((function(e,o){r!==o&&t.collisionCheck(n,e)&&i.add(r)})),e.forEach((function(e){t.collisionCheck(n,e)&&i.add(r)}))})),o=o.filter((function(n,t){return!i.has(t)||(e=[].concat(Object(c.a)(e),[n]),!1)})),{bots:e,players:o}},t.renderGame=function(){t.setState((function(n){var e=t.collision({bots:n.bots,players:n.players});if(0===e.players.length)return t.config.gameOver=!0,t.config.gameStart=!1,e;var o=e.bots.map((function(n){var e=n.top+t.config.speedBots;return e>t.config.sizeArena.height?t.randomPosition(n,1):Object(s.a)({},n,{top:e})}));return{bots:o=o.filter((function(n){return!("player"===n.type&&n.top<0)})),players:e.players.map((function(n){var e=n.left,o=n.top,i=n.width,r=n.height,a=t.direction.findIndex((function(e){return e.id===n.id}));return t.direction[a].isLeft&&(e-=t.config.speedPlayers),t.direction[a].isRight&&(e+=t.config.speedPlayers),t.direction[a].isTop&&(o-=t.config.speedPlayers),t.direction[a].isBottom&&(o+=t.config.speedPlayers),e<0&&(e=0),e>t.config.sizeArena.width-i&&(e=t.config.sizeArena.width-i),o<0&&(o=0),o>t.config.sizeArena.height-r&&(o=t.config.sizeArena.height-r),Object(s.a)({},n,{left:e,top:o})}))}})),t.config.gameOver||(t.config.speedBots+=.005,t.config.distance+=t.config.speedBots/1e4,requestAnimationFrame(t.renderGame))},t.gameStart=function(n){t.direction=t.initDirection(),t.config=t.initConfig(n),t.config.gameStart=!0,t.setState(t.initState(),t.renderGame)},t.botsCarsList=[{color:"#1d95f9",width:40,height:60,left:0,top:0,type:"bot",id:"bot1"},{color:"#1d95f9",width:40,height:60,left:0,top:0,type:"bot",id:"bot2"},{color:"#0065b9",width:50,height:80,left:0,top:0,type:"bot",id:"bot3"}],t.playersCarsList=[{color:"#f5661f",width:40,height:60,left:0,top:0,type:"player",id:"player1"},{color:"#ce40ff",width:40,height:60,left:0,top:0,type:"player",id:"player2"},{color:"#fc4664",width:40,height:60,left:0,top:0,type:"player",id:"player3"}],t.keys=[{left:"KeyA",right:"KeyD",top:"KeyW",bottom:"KeyS"},{left:"ArrowLeft",right:"ArrowRight",top:"ArrowUp",bottom:"ArrowDown"},{left:"KeyH",right:"KeyK",top:"KeyU",bottom:"KeyJ"}],t.direction=t.initDirection(),t.config=t.initConfig(),t.state=t.initState(),t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp)}},{key:"render",value:function(){return i.a.createElement(x,null,i.a.createElement(v,{size:this.config.sizeArena},i.a.createElement(O,{cars:this.state.bots}),i.a.createElement(O,{cars:this.state.players}),i.a.createElement(w,null,"Distance: ",this.config.distance.toFixed(2)),!this.config.gameStart&&i.a.createElement(D,{controlButtons:["wasd","\u2191\u2190\u2193\u2192","uhjk"],gameStart:this.gameStart})),i.a.createElement(q,{keyDown:this.keyDown,keyUp:this.keyUp,keys:{left:"KeyA",right:"KeyD",top:"KeyW",bottom:"KeyS"}}))}}]),e}(o.Component);a.a.render(i.a.createElement(N,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.c6b8c5e0.chunk.js.map